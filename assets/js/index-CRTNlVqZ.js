import{m as y}from"./mittBus-rOgeEvW-.js";import{b as e,e as r,F as D,aD as S,aE as d,h as w,aH as h,g as _,o as $}from"./index-0uBKbaiL.js";import{_ as I}from"./index-a8hb7T9s.js";import{r as b}from"./map-Cu3heeiC.js";import"./Draw-CvWszftC.js";import"./gis-DU2uZt9_.js";import"./DemoPopupDetailDialog-Hgryd0Fa.js";import"./plugin-vueexport-helper-DlAUqK2U.js";const C=i=>{let a=null;return i.currentPopupData?a=i.currentPopupData:a=i.popupData,e(D,null,[e("div",{class:"common_popup_item"},[e(S,{title:a.newCellName,border:!0,class:"margin-top",column:2,size:"small"},{default:()=>[e(d,{label:"cgi"},{default:()=>[a.cgi]}),e(d,{label:"网络制式"},{default:()=>[a.networkType]}),e(d,{label:"基站类型"},{default:()=>[a.coverType]}),e(d,{label:"站号"},{default:()=>[a.stationNo]}),e(d,{label:"频段"},{default:()=>[a.workFrequency]}),a.antDirectionAngle&&e(d,{label:"方位角"},{default:()=>[a.antDirectionAngle,r("°")]}),e(d,{label:"经纬度"},{default:()=>[r("["),a.longitude,r(", "),a.latitude,r("]")]})]}),e("span",{class:"get_more","data-function":"getMore"},[r("查看更多")])])])},v=i=>{let a=null;return i.currentPopupData?a=i.currentPopupData:a=i.popupData,e(D,null,[e("div",{class:"common_popup_item"},[e("h3",null,[r("POI搜索结果")]),e("ul",null,[e("li",null,[e("dl",null,[e("dt",null,[r("地址:")]),e("dd",null,[a.address])])]),e("li",null,[e("dl",null,[e("dt",null,[r("名称:")]),e("dd",null,[a.name])])]),e("li",null,[e("dl",null,[e("dt",null,[r("经纬度:")]),e("dd",null,[r("["),a.lonlat,r("]")])])])])])])},N=(i,a)=>{let g=[];const p=i.popupData.map(c=>{let t={};switch(c.get("type")){case"Marker":t=c.get("pointData");break;case"Curve":t=c.get("curveData");break}if(g.push(t),!t)return;switch(t.networkType){case"4g":t.newCellName=t.cellName;break;case"5g":t.newCellName=t.nrCellName;break}const m=f=>e("div",{class:"feature_item","data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("span",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[r("["),t.networkType,r("] "),t.newCellName]),e("dl",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("dt",null,[r("cgi:")]),e("dd",null,[t.cgi])]),f||"",e("dl",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("dt",null,[r("状态:")]),e("dd",null,[t.cellLifeStatus])])]),F=()=>e("div",{class:"feature_item","data-function":"getSingleByFeatures","data-unique":`hotPointID:${t.hotPointID}`},[e("span",{"data-function":"getSingleByFeatures","data-unique":`hotPointID:${t.hotPointID}`},[r("[POI点] "),t.address]),e("dl",{"data-function":"getSingleByFeatures","data-unique":`hotPointID:${t.hotPointID}`},[e("dt",null,[r("名称:")]),e("dd",null,[t.name])]),e("dl",{"data-function":"getSingleByFeatures","data-unique":`hotPointID:${t.hotPointID}`},[e("dt",null,[r("经纬度:")]),e("dd",null,[r("["),t.lonlat,r("]")])])]);if(!c.get("businessType")&&!c.get("drawType"))return i.type.length>3?m(e("dl",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("dt",null,[r("基站类型:")]),e("dd",null,[t.coverType,r(" - ["),c.get("type")==="Marker"?"标注点":"扇区",r("]")])])):m();if(c.get("businessType")==="POIMarker")return F()});return a(g),e(D,null,[e("div",{class:"common_features_popup_item"},[e("ul",{class:"features_top"},[e("li",null,[i.name]),e("li",null,[r("类型: "),i.type])]),p])])},T=(i,a)=>{let g=0,p=0;const c=i.popupData.map(t=>{switch(t.coverType){case"室内":g+=1;break;case"室外":p+=1;break}switch(t.networkType){case"4g":t.newCellName=t.cellName;break;case"5g":t.newCellName=t.nrCellName;break}return e("div",{class:"feature_item","data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("span",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[r("["),t.networkType,r("] "),t.newCellName]),e("dl",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("dt",null,[r("cgi:")]),e("dd",null,[t.cgi])]),e("dl",{"data-function":"getSingleByFeatures","data-unique":`cgi:${t.cgi}`},[e("dt",null,[r("状态:")]),e("dd",null,[t.cellLifeStatus])])])});return a(i.popupData),e(D,null,[e("div",{class:"common_features_popup_item"},[e("ul",{class:"features_top"},[e("li",null,[i.popupData.length,r(" 个要素")]),e("li",null,[r("点要素: "),g]),e("li",null,[r("扇区要素: "),p])]),c])])},G={__name:"index",setup(i){const a=w(null),{proxy:g}=h();let p="频率";y.on("fixCommonPopupData",u=>{switch(u.popupData.networkType){case"4g":u.popupData.newCellName=u.popupData.cellName;break;case"5g":u.popupData.newCellName=u.popupData.nrCellName;break}}),y.on("setCommonPopupInner",({popupObj:u,featureItem:l,callback:s})=>{if(!l){let n=u.currentPopupData;if(n||(n=u.popupData),n.searchType==="POI"){s(v(u));return}s(C(u));return}if(l.get("businessType")==="POIMarker"){s(v(u));return}s(C(u))}),y.on("setFeaturesPopupInner",({popupObj:u,callback:l,next:s})=>{u.noFeature?l(T(u,n=>{s(n)})):l(N(u,n=>{s(n)}))}),y.on("popupDataGetMore",async({currentPopupObj:u,callback:l})=>{!u.currentPopupData&&u.popupData&&(u.currentPopupData=u.popupData),l(u.currentPopupData)});const c=(u,l)=>{a.value.renderFeatureByData(u,l,(s,n)=>{if(n.coverType==="室内"){let o=[];o={lonlat:[n.longitude,n.latitude],pointData:n},a.value.addPoint(s,o)}if(n.coverType==="室外"){let o=[];o.push({lonlat:[n.longitude,n.latitude],curveData:n}),a.value.addCurve(s,o,k=>t(k.curveData))}})},t=(u,l=.4)=>{switch(p){case"频率":return m(u,l=.4);case"健康度":return F(u,l=.4)}},m=(u,l=.4)=>{let s=null,n="rgba(255, 205, 67, 0.3)",o=0;switch(u.workFrequency){case"A频段":s=a.value.setFeaturesStyle(`rgba(200, 22, 100, ${l})`,n),o=100;break;case"D频段":s=a.value.setFeaturesStyle(`rgba(55, 33, 188, ${l})`,n),o=110;break;case"E频段":s=a.value.setFeaturesStyle(`rgba(88, 99, 200, ${l})`,n),o=120;break;case"F频段":s=a.value.setFeaturesStyle(`rgba(255, 255, 0, ${l})`,n),o=130;break;case"FDD":s=a.value.setFeaturesStyle(`rgba(255, 76, 127, ${l})`,n),o=140;break;default:s=a.value.setFeaturesStyle(`rgba(32, 222, 230, ${l})`,n),o=150;break}return{myCurveStyle:s,myCurveRadius:o}},F=(u,l=.4)=>{let s=null,n="rgba(255, 205, 67, 0.3)",o=0;switch(u.workFrequency){case"A频段":s=a.value.setFeaturesStyle(`rgba(200, 22, 100, ${l})`,n),o=100;break;case"D频段":s=a.value.setFeaturesStyle(`rgba(55, 33, 188, ${l})`,n),o=110;break;case"E频段":s=a.value.setFeaturesStyle(`rgba(88, 99, 200, ${l})`,n),o=120;break;case"F频段":s=a.value.setFeaturesStyle(`rgba(255, 255, 0, ${l})`,n),o=130;break;case"FDD":s=a.value.setFeaturesStyle(`rgba(255, 76, 127, ${l})`,n),o=140;break;default:s=a.value.setFeaturesStyle(`rgba(32, 222, 230, ${l})`,n),o=150;break}return{myCurveStyle:s,myCurveRadius:o}},f=(u,l)=>{},P=async u=>{B(u);let l=await b();const{cell4gList:s,cell5gList:n}=l.data;n.forEach(o=>{o.networkType="5g"}),c(u,s),c(u,n)},B=u=>{let l=a.value.getCurrentViewPosition(u);return{minLatitude:l.bottomRight[1],maxLatitude:l.topLeft[1],minLongitude:l.topLeft[0],maxLongitude:l.bottomRight[0]}};return(u,l)=>($(),_(I,{class:"empty_map",ref_key:"refOpenlayerBaseMap",ref:a,isShowLend:!0,currentPageType:"demo",onGetOlMapInstance:f,onGetCurrentViewData:P},null,512))}};export{G as default};
